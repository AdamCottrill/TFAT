{% extends "tfat/tfat_base.html" %}

{% block content %}
<div class="container">

    <h3>Tag Recovery Reports</h3>

{% if object_list %}


    {% if page_obj %}
    {% if page_obj.paginator.num_pages > 1 %}
    <ul class="pager">
        {% if page_obj.has_previous %}
        <li class="previous"><a href="?page={{ page_obj.previous_page_number }}">Newer Reports</a></li>
        {% else %}
        <li class="previous disabled"><a href="#">Newer Reports</a></li>
        {% endif %}

        <span class="page-current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
        <li class="next"><a href="?page={{ page_obj.next_page_number }}">Older Reports</a></li>
        {% else %}
        <li class="next disabled"><a href="#">Older Reports</a></li>
        {% endif %}
    </ul>
    {% else %}
    <br />
    {% endif %}
    {% endif %}


{% for object in object_list %}

    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">
                <div class="row" >
                    <div  class="col-md-8" >
                        <a href="{% url 'angler_reports' object.reported_by.id %}">{{ object.reported_by }}</a> ({{ object.report_date|date:"M d, Y" }})
                    </div>
                    <div class="col-md-2" >
                    {% if object.follow_up %}
                        <button type="button" class="btn btn-danger btn-xs pull-right">Follow-up Required</button>
                    {% endif %}
                    </div>
                    <div class="col-md-2" >

                        <a class="btn btn-default btn-xs pull-right"
                           href="{% url 'update_report' angler_id=object.reported_by.id report_id=object.id %}"
                           role="button">Edit Report</a>




                    </div>
                </div>
            </h3>
        </div>
        <div class="panel-body">
            {% if object.comment %}
            <p><em>Comment: </em>{{object.comment}}</p>
            {% endif%}
            <table class="table">
                <thead>
                    <tr>
                        <th>TagID </th>
                        <th>TagDoc </th>
                        <th>Colour </th>
                        <th>Species</th>
                        <th>Tlen</th>
                        <th>Flen</th>
                        <th>Date </th>
                        <th>Location</th>
                    </tr>
                </thead>

                {% for item in object.get_tags %}
                <tr>
                    <td> <a href="{% url 'tagid_detail_view' tagid=item.tagid %}">{{item.tagid}}</a> </td>
                    <td>{{ item.tagdoc }} </td>
                    <td>{{ item.get_tag_colour_display }} </td>
                    <td>{{ item.spc.common_name }} </td>
                    <td>{{ item.tlen }} </td>
                    <td>{{ item.flen }} </td>
                    <td>{{ item.recovery_date }} </td>
                    <td>{{ item.general_name }} </td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>

{% endfor %}


{% else %}

  <div class="alert alert-warning">
    <h3>Oops!</h3>

    <p> There don't seem to be any tag reports right now.</p>

  </div>


{% endif%}

</div>
{% endblock content %}
